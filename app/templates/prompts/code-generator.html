{% extends "prompts/dashboard_prompt.html" %}

{% block style %}
<style>
    body {
        /*background: linear-gradient(135deg, #00060f, #020641, #0508b1);*/
        background-color: #05061d;
        color: #fff;
        min-height: 100vh;
    }

    .nav-pills .nav-link {
        color: #fff;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 30px;
        margin: 0 5px;
        transition: all 0.3s ease-in-out;
    }

    .nav-pills .nav-link:hover,
    .nav-pills .nav-link.active {
        color: #0f2027;
        background-color: #17a2b8;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(23, 162, 184, 0.3);
    }

    .content-section {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        padding: 20px;
        margin-top: 20px;
    }

    #chatbox {
        height: 450px;
        overflow-y: auto;
        background-color: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .message {
        margin-bottom: 15px;
        padding: 10px;
        border-radius: 20px;
        max-width: 80%;
    }

    .user-message {
        background-color: #17a2b8;
        color: #fff;
        align-self: flex-end;
        margin-left: auto;
    }

    .bot-message {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
        align-self: flex-start;
    }

    .input-group {
        position: relative;
    }

    #prompt {
        background-color: rgba(255, 255, 255, 0.1);
        border: none;
        color: #fff;
        padding: 20px 50px 20px 20px;
        height: 70px;
        border-radius: 35px;
    }

    #prompt::placeholder {
        color: rgba(255, 255, 255, 0.5);
    }

    #send-button {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background-color: #17a2b8;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
    }

    #send-button:hover {
        background-color: #138496;
    }
</style>
{%endblock%}

{% block scripts %}


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='app/dev_ia.js')}}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const chatbox = document.getElementById('chatbox');
        const userInput = document.getElementById('prompttext');
        const sendButton = document.getElementById('send-button');

        function addMessage(message, isUser = false) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(isUser ? 'user-message' : 'bot-message');
            messageElement.textContent = message;
            chatbox.appendChild(messageElement);
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        function botResponse(message) {
            const lowerMessage = message.toLowerCase();
            if (lowerMessage.includes('experience')) {
                return "John has over 5 years of experience in software engineering, specializing in full-stack development. He has worked on various projects involving JavaScript, React, Node.js, and Python.";
            } else if (lowerMessage.includes('project')) {
                return "John has worked on several exciting projects, including a scalable e-commerce platform and a machine learning-powered recommendation system. You can find more details on the Projects page.";
            } else if (lowerMessage.includes('skill') || lowerMessage.includes('technology')) {
                return "John's core skills include JavaScript, React, Node.js, Python, Django, SQL, MongoDB, AWS, Docker, and Git. He's also proficient in RESTful APIs and Agile methodologies.";
            } else if (lowerMessage.includes('contact') || lowerMessage.includes('hire')) {
                return "You can contact John via email at john.doe@example.com or connect with him on LinkedIn. He's always open to new opportunities and collaborations!";
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return "Hello! I'm Data Tuning code generator. How can I assist you today?";
            } else {
                return "I'm sorry, I don't have specific information about that. Is there anything else you'd like to know about John's experience, projects, or skills?";
            }
        }

        function handleUserInput() {
            const message = userInput.value.trim();
            if (message) {
                addMessage(message, true);
                userInput.value = '';
                setTimeout(() => {
                    const response = botResponse(message);
                    addMessage(response);
                }, 500);
            }
        }

        sendButton.addEventListener('click', handleUserInput);
        userInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                handleUserInput();
            }
        });

        // Initial bot message
        addMessage("Hello! I'm Data Tuning code generator. How can I help you today?");
    });
</script>

{%endblock%}

{% block content %}
<div class="container py-5">
    <div class="col-md-4" style="font-size: .9rem;">
        <p>
            Use our AI chatbot to help you programming
        </p>
    </div>

    <div class="content-section">
        <form method="POST">

            <div id="chatbox">
                {% if message %}{{message}}{%endif%}
            </div>
            <div class="input-group">
                <input type="text" id="prompt" name="prompt" class="form-control"
                    placeholder="Type your message here...">
                <button class="btn btn-primary" type="submit" id="send-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

        </form>
    </div>
</div>

{%endblock%}