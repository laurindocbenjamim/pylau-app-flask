<html>

<head>
    <base href="{{ url_for('index')}}">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaubCode - Code Editor</title>
    <link rel="icon" type="image/x-icon"
        href="https://github.com/laurindocbenjamim/dev-images/raw/refs/heads/main/icons8-developer-128.ico">
    <!--<link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='assets/img/favicon/icon-dev/apple-touch-icon.png')}}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='assets/img/favicon/icon-dev/favicon-32x32.png')}}">
    <link rel="icon" type="image/lnk" sizes="16x16" href="{{ url_for('static', filename='assets/img/favicon/icon-dev/favicon-16x16.png - Shortcut.lnk')}}">
    -->
    <link rel="manifest" href="{{ url_for('static', filename='assets/img/favicon/site.webmanifest')}}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-beautify.js"></script>
    <script src="https://unpkg.com/prettier@2.7.1/standalone.js"></script>
    <script src="https://unpkg.com/prettier@2.7.1/parser-html.js"></script>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #1e1e1e;
            color: #d4d4d4;
            height: 100%;
            overflow: hidden;
        }

        .custom-container {
            display: flex;
            height: 100vh;
        }

        .vertical-menu {
            width: 250px;
            background-color: #252526;
            color: #d4d4d4;
            padding-top: 60px;
            transition: width 0.3s ease;
            overflow-x: hidden;
        }

        .vertical-menu.collapsed {
            width: 60px;
        }

        .vertical-menu ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .vertical-menu li {
            margin-bottom: 4px;
        }

        .vertical-menu a {
            display: flex;
            align-items: center;
            padding: 6px 20px;
            color: #d4d4d4;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }

        .vertical-menu a:hover,
        .vertical-menu a.active {
            background-color: #37373d;
        }

        .vertical-menu i {
            font-size: 1.2rem;
            margin-right: 15px;
            width: 20px;
            text-align: center;
        }

        .vertical-menu span {
            white-space: nowrap;
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .vertical-menu.collapsed span {
            opacity: 0;
        }

        .toggle-menu {
            position: absolute;
            top: 20px;
            left: 210px;
            background-color: #252526;
            color: #d4d4d4;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease, left 0.3s ease;
        }

        .toggle-menu:hover {
            background-color: #37373d;
        }

        .vertical-menu.collapsed .toggle-menu {
            left: 20px;
        }

        .vertical-menu .submenu {
            display: none;
            list-style-type: none;
            padding-left: 10px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .vertical-menu .submenu li {
            margin-bottom: 2px;
        }

        .vertical-menu .submenu a {
            display: flex;
            align-items: center;
            padding: 0 4px;
            margin-left: 15px;
            color: #d4d4d4;
            font-size: .8rem;
            text-decoration: none;
            border-left: 1px solid #797979;
            transition: background-color 0.3s ease;
        }

        .vertical-menu .submenu.show {
            display: block;
            opacity: 1;
            transition: opacity 0.2s ease;
        }

        .show {
            display: block;
            opacity: 1;
            transition: opacity 0.2s ease;
        }

        .vertical-menu .submenu.hidden {
            display: none;
            transform: translateX(200px);
            background-color: red;
        }

        #my-projects-menunu {
            height: 100px;
        }

        #fa-minus {
            display: none;
            margin-left: 10px;
            color: #0d9cdf;
            font-size: 12px
        }

        #fa-plus {
            margin-left: 10px;
            color: #0d9cdf;
            font-size: 12px
        }



        .editor-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .toolbar {
            background-color: #2d2d2d;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .toolbar select,
        .toolbar button {
            background-color: #3c3c3c;
            color: #d4d4d4;
            border: none;
            padding: 1px 5px;
            margin-right: 10px;
            border-radius: 3px;
            cursor: pointer;
        }

        .toolbar select:hover,
        .toolbar button:hover {
            background-color: #4b4b4b;
        }

        header select,
        header button {
            background-color: #3c3c3c;
            color: #d4d4d4;
            border: none;
            padding: 1px 5px;
            margin-right: 10px;
            border-radius: 3px;
            cursor: pointer;
        }

        header select:hover,
        header button:hover {
            background-color: #4b4b4b;
        }

        #editor {
            flex-grow: 1;
        }

        .status-bar {
            background-color: #007acc;
            color: #ffffff;
            padding: 5px 10px;
            font-size: 0.9rem;
        }

        .progress-bar {
            margin: 0;
            height: 30px;
            color: #ffffff;

            padding: 5px 3px;
            font-size: 0.7rem;
        }

        #browser {
            display: none;
            background-color: #ffffff;
            color: #000;
            padding: 5px 10px;
            overflow-y: scroll;
            overflow-x: scroll;
            font-size: 0.9rem;
            justify-content: center;
            transition: opacity 2s ease;
            /* 2 seconds transition for opacity */
        }

        .preview {
            width: 90%;
            height: 500px;
            border: 1px solid #ced4da;
            padding: 10px;
            border-radius: 5px;
            background-color: #ffffff;
            overflow-y: auto;
            transition: opacity 2s ease;
            /* 2 seconds transition for opacity */
        }

        .minimize-browser {
            opacity: 1;
            height: 0px;
            transition: opacity 0.2s ease;
        }

        .expand-browser {
            padding: 3rem 4rem;
            height: 95%;
            transition: background-color 0.3s ease, left 0.3s ease;
        }



        .ai-chat-section {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin-top: 10px;
            opacity: 0;
            transition: background-color 2s ease, left 0.3s ease;
        }

        .ai-chat-section.show {
            opacity: 1;
            display: block;
        }

        .ai-chat-section #chatbox {
            height: 450px;
            overflow-y: auto;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .ai-chat-section .message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 20px;
            max-width: 80%;
        }

        .ai-chat-section .user-message {
            background-color: #17a2b8;
            color: #fff;
            align-self: flex-end;
            margin-left: auto;
        }

        .ai-chat-section .bot-message {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            align-self: flex-start;
        }

        .ai-chat-section .input-group {
            position: relative;
        }

        .ai-chat-section #user-prompt {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            padding: 20px 50px 20px 20px;
            height: 70px;
            border-radius: 35px;
        }

        .ai-chat-section #user-prompt::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .ai-chat-section #send-prompt {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #17a2b8;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .ai-chat-section #send-prompt:hover {
            background-color: #138496;
        }


        /* ------ Console css */
        .console {
            height: 300px;
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 10px;
            font-family: monospace;
            /*overflow-y: auto;*/
        }

        .console-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .console-title {
            font-weight: bold;
        }

        .console-clear {
            background-color: transparent;
            color: #ecf0f1;
            border: none;
            cursor: pointer;
        }

        .console-clear:hover {
            border-radius: 4px;
            padding: .2rem .3rem;
            background-color: #445464;
        }

        .console-output {
            height: 230px;
            padding: 7px;
            overflow-y: auto;
            white-space: pre-wrap;
            border-bottom: 1px solid #3b4e61;
        }

        #resizer {
            width: 2px;

            cursor: ew-resize;
            background-color: #858585;
            position: absolute;
            margin-left: 247px;
            top: 0;
            height: 100%;
        }


        @media (max-width: 768px) {
            .vertical-menu {
                width: 110px;
            }

            .vertical-menu .submenu span {
                display: none;
            }

            .vertical-menu span {
                display: none;
            }

            .toggle-menu {
                display: none;
            }
        }

        .logo {
            position: absolute;
            margin: auto;
            padding: 0;
            top: 2%;
            margin-left: 1%;
            text-align: center;
            transition: opacity 0.3s ease;
        }

        .logo-on-left {
            position: absolute;
            margin: auto;
            padding: 0;
            top: 2%;
            text-align: center;
            margin-left: 5%;
        }

        #filename {
            border: 1px solid;
            border-radius: 0px;
        }
    </style>
</head>

<body>
    <div class="custom-container">

        <a href="#" id="logo" class="logo" title="LaubCode">
            <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-developer-96.png?raw=true"
                width="30" height="30" alt="logo" srcset="">
            <span style="font-size: .8rem; color:#3cd644;display:block;">LaubCode</span>
        </a>

        <div class="vertical-menu" id="verticalMenu">

            <button class="toggle-menu" id="toggleMenu">
                <i class="fas fa-chevron-left"></i>
            </button>
            <ul>

                <li id="my-projects-menu">
                    <a href="#" id="my-projects" onclick="showContent(event)">
                        <i class="fas fa-folder"></i><span>Projects</span>
                        <i class="fa-solid fa-minus" id="fa-minus"></i>
                        <i class="fa-regular fa-plus" id="fa-plus"></i>
                    </a>
                    <!--<ul class="submenu">
                        {% if directories %}
                        {% for dir in directories %}
                            <li>
                                <a class="nav-link" href="#">
                                    <img src="https://img.icons8.com/?size=100&id=dINnkNb1FBl4&format=png&color=000000" width="15"
                                    height="15" alt="html-file" srcset="">
                                    <span>{{ dir }}</span>
                                </a>
                            </li>
                        {% endfor %}
                        {% endif %}
                    </ul>-->
                    <ul class="submenu" id="submenu">
                        <li style="margin-bottom: 2%;cursor:pointer; margin-left:3%;">
                            <span class="badge borde border-light-subtle text-light-emphasis rounded-pill"
                                title="Create file" id="create-new-file"
                                style="cursor:pointer;text-align:center; border:none">
                                <i class="fa-solid fa-file-circle-plus"
                                    style="color: #3bec24;margin-bottom: 5%; margin-top:5%"></i>
                            </span>
                            <!--<button class="btn btn-primary rounded-circle p-3 lh-1" type="button" id="create-new-file" title="create file">
                                <i class="fa-solid fa-file-circle-plus" style="color: #3bec24;margin-bottom: 5%; margin-top:5%"></i>
                            </button>-->
                        </li>
                        <li id="new-filename-inputfield" style="margin-bottom: 2%; margin-left:3%;"></li>
                        {% if filelist %}
                        {% if '404' not in filelist %}
                        {% for filename in filelist|sort %}

                        <li>
                            <a class="nav-link" href="#" title="{{ filename }}"
                                onclick="openFile(event,'{{ filename }}')">
                                {% if 'html' in filename %}
                                <img src="https://img.icons8.com/?size=100&id=20909&format=png&color=000000" width="15"
                                    height="15" alt="html-file" srcset="">
                                <!--<i class="fa-brands fa-html5"></i>-->
                                {% elif 'js' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/javascript-icon.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'py' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/javascript-icon.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'java' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-java-48.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'css' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-css-48.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'scss' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-css-48.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'csv' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-csv-30.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'xlsx' in filename or 'xls' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-excel-48.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'mp4' in filename or 'wave' in filename or 'mkv' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-video-64.png?raw=true"
                                    width="20" height="20" alt="javascript-file" srcset="">
                                {% elif 'mp3' in filename or 'm4a' in filename %}
                                <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-audio-40.png?raw=true"
                                    width="15" height="15" alt="javascript-file" srcset="">
                                {% endif %}
                                <span>{{ filename }}</span>
                            </a>
                        </li>
                        {% endfor %}
                        {% else %}
                        <li><span style="font-size: .7rem;">Empty directory... </span></li>
                        {% endif %}
                        {% endif %}
                    </ul>
                </li>
                <!--<li><a href="#"><i class="fas fa-cog"></i><span>Settings</span></a></li>
                <li><a href="#"><i class="fas fa-question-circle"></i><span>Help</span></a></li>-->

            </ul>
            <ul>
                <li><a href="#" id="chat-ai" onclick="chatWithAI(event)" style="border-top: 1px solid #3f3e3e;"><i
                            class="fa-regular fa-comments"></i><span>AI
                            chat</span></a></li>
            </ul>
            <!--<div id="resizer"></div>-->
        </div>


        <div class="editor-container">

            <header class="p-3 mb-3 border-bottom">
                <div class="container">
                    <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">

                        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                            <li>
                                <a class="nav-link px-2 link-secondary" id="file-title" tabindex="0"
                                    style="display:none"></a>
                                <a class="nav-link px-2 link-secondary" id="filename">example.js</a>
                            </li>

                            <!--<li><a href="#" class="nav-link px-2 link-body-emphasis">Inventory</a></li>-->
                        </ul>
                        <ul class="navbar-nav">
                            <li class="nav-item dropdown">
                                <button class="btn btn-dark btn-sm dropdown-toggle" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    Edit
                                </button>
                                <ul class="dropdown-menu dropdown-menu-dark">
                                    <li><a class="dropdown-item" href="#" onclick="editOptions(event,'copy')">Copy</a>
                                    </li>
                                    <li><a class="dropdown-item" href="#" onclick="editOptions(event,'paste')">Paste</a>
                                    </li>
                                    <li><a class="dropdown-item" href="#"
                                            onclick="editOptions(event,'format-doc')">Format Document</a></li>
                                </ul>
                            </li>
                        </ul>

                        <div class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
                            <!--<select id="language-select">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                        </select>-->
                            <select id="theme-select">
                                <option value="monokai">Monokai</option>
                                <option value="github">GitHub</option>
                                <option value="tomorrow_night">Tomorrow Night</option>
                                <option value="solarized_dark">Solarized Dark</option>
                            </select>
                            <button id="run-btn" style="background-color: #3cd644;color:#000"><i
                                    class="fas fa-play"></i>
                                Run</button>
                            <button id="save-btn"><i class="fas fa-save"></i> Save</button>
                        </div>

                        <div class="dropdown text-end">
                            <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle"
                                data-bs-toggle="dropdown" aria-expanded="false">

                                {% if 'image_profile' in session %}
                                <img src="{{ session.get('image_profile')}}" alt="mdo" width="32" height="32"
                                    class="rounded-circle">
                                {% else %}
                                <img src="https://img.icons8.com/?size=100&id=7rcs0z3sdioE&format=png&color=000000"
                                    alt="mdo" width="32" height="32" class="rounded-circle">
                                {% endif %}
                            </a>
                            <ul class="dropdown-menu text-small">
                                <li><a class="dropdown-item">{{ session.get('firstname')}} {{
                                        session.get('lastname')}}</a></li>
                                <li><a class="dropdown-item" style="text-decoration: underline;">{{
                                        session.get('email')}}</a></li>
                                <li><a class="dropdown-item">New project...</a></li>
                                <li><a class="dropdown-item">Settings</a></li>
                                <li><a class="dropdown-item">Profile</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item">Sign out</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </header>


            <!--<div class="toolbar">
                <div style="margin-left: 2%; ">
                    <span id="file-title" tabindex="0" style="display:none">
                    </span>
                    <span id="filename">example.js</span>
                    <select id="language-select">
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                    </select>
                    <select id="theme-select">
                        <option value="monokai">Monokai</option>
                        <option value="github">GitHub</option>
                        <option value="tomorrow_night">Tomorrow Night</option>
                        <option value="solarized_dark">Solarized Dark</option>
                    </select>
                </div>
                <div>
                    <button id="run-btn" style="background-color: #3cd644;color:#000"><i class="fas fa-play"></i>
                        Run</button>
                    <button id="save-btn"><i class="fas fa-save"></i> Save</button>
                </div>
            </div>-->
            <!--- Code editor windows -->
            <div id="editor"></div>

            <!--- Browser windows -->
            <div class="progress-bar">
                <div class="progress mt-3">
                    <div id="myBar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0"
                        aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>

            <!--- Console windows -->
            <div class="status-bar">
                Line: <span id="line-number">1</span>, Column: <span id="column-number">1</span>
            </div>
            <!-- Console -->
            <div class="console" id="console">
                <div class="console-header">
                    <div class="console-title">Console</div>
                    <button class="console-clear" id="clearConsole">Clear</button>
                </div>
                <div class="console-output" id="consoleOutput"></div>
            </div>
            <!-- end console -->

            <!--  Chat with AI -->
            <div class="ai-chat-section">
                <div class="input-group">
                    <input type="text" id="user-prompt" name="user-prompt" class="form-control"
                        placeholder="Type your message here...">
                    <button class="btn btn-primary" type="button" id="send-prompt">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div id="chatbox"></div>
            </div>
            <!--- Browser windows -->
            <div class="browser" id="browser">
                <nav class="navbar navbar-expand-lg bg-body-tertiary">
                    <div class="container-fluid">
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <a class="navbar-brand" href="#">Preview</a>
                        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                <li class="nav-item">
                                    <a class="nav-link" aria-current="page" id="current-file" href="#">
                                        <span tabindex="0">example.js</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                                </li>

                            </ul>
                            <button class="btn btn-primary rounded-circle" onclick="closeBrowser()" type="submit"><i
                                    class="fa fa-close text-black"></i></button>

                        </div>
                    </div>
                </nav>

                <!--<nav class="navbar navbar-expand-lg bg-body-tertiary rounded" aria-label="Thirteenth navbar example">
                        <div class="container-fluid">
                          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample11" aria-controls="navbarsExample11" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                          </button>
                  
                          <div class="collapse navbar-collapse d-lg-flex" id="navbarsExample11">
                            <a class="navbar-brand col-lg-3 me-0" href="#">Home</a>
                            
                            <div class="d-lg-flex col-lg-3 justify-content-lg-end">
                              <button class="btn btn-primary rounded-circle"><i class="fa fa-close text-black"></i></button>
                            </div>
                          </div>
                        </div>
                      </nav>-->

                <!--<div class="preview">..</div>-->
                <iframe id="output" class="preview"></iframe>
            </div>

            <!-- Footer -->

            <!--<footer class="d-flex flex-wrap justify-content-between align-items-center bg-ligh py-3 my-4 border-top">
                <div class="col-md-4 d-flex align-items-center">
                  <a href="#" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1">
                    <img src="https://github.com/laurindocbenjamim/dev-images/blob/main/icons8-developer-96.png?raw=true"
                width="30" height="30" alt="logo" srcset="">
                  </a>
                  <span class="mb-3 mb-md-0 text-body-light">&copy; 2023 Data Tuning, Tech</span>
                </div>
            
                <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
                  <li class="ms-3"><a class="text-body-secondary" href=""><i class="fa-brands fa-facebook" style="color: #fff;"></i></a></li>
                  <li class="ms-3"><a class="text-body-secondary" href="#"><i class="fa-brands fa-instagram" style="color: #fff;"></i></a></li>
                  <li class="ms-3"><a class="text-body-secondary" href="#"><i class="fa-brands fa-twitter" style="color: #fff;"></i></a></li>
                </ul>
              </footer>-->

            <!-- End footer -->

        </div>
    </div>

    <!---- Including Footer -->
    {% include './footer.html' %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>

    <script src="{{ url_for('static', filename='app/app_editor.js')}}"></script>
    <script src="{{ url_for('static', filename='assets/js/editor_controller.js')}}"></script>
    <script src="{{ url_for('static', filename='app/debug_python_script.js')}}"></script>
    <script src="{{ url_for('static', filename='app/debug_javascript_code.js')}}"></script>
    <script src="{{ url_for('static', filename='app/chat_box.js')}}"></script>

    <script>

        document.addEventListener('keydown', function (e) {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
            }
        });

        function update_the_page() {
            // Get the query string from the current URL
            const queryString = window.location.search;

            // Create a URLSearchParams object
            const urlParams = new URLSearchParams(queryString);

            // Get the value of a specific parameter
            const fileName = urlParams.get("fileName"); // "shirt"
            const courseID = urlParams.get("courseID"); // "shirt"
            const description = urlParams.get("description"); // "shirt"
            const user_token = urlParams.get("user_token"); // "shirt"

            try {
                window.location.href = `${window.location.origin}/course/learn/laubcode/root/load-scripts?
            fileName=${fileName}&&courseID=${courseID}&&description=${description}&&user_token=${user_token}`;
            } catch (err) { console.log(err) }
        }



        const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute("content");
        //const editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/javascript");
        editor.setValue(`// Welcome to the LaubCoder Code Editor!
                // Start coding here...
                `);
        //Line number
        //editor.renderer.setShowGutter(true); // or false to hide
        //Highlight Active Line
        editor.setHighlightActiveLine(true); // or false to disable

        // Show print margin
        editor.setShowPrintMargin(false); // or true to show

        // HTML content with escaped characters
        // HTML content with escaped characters
        var htmlContent = `&lt;!DOCTYPE html&gt;
        &lt;html&gt;
        &lt;head&gt;
        &lt;title&gt;Sample Page&lt;/title&gt;
        &lt;/head&gt;
        &lt;body&gt;
        &lt;h1&gt;Hello, World!&lt;/h1&gt;
        &lt;p&gt;This is a sample HTML file.&lt;/p&gt;
        &lt;/body&gt;
        &lt;/html&gt;`;
        editor.session.setValue(htmlContent);


        editor.commands.addCommand({
            name: 'save',
            bindKey: { win: 'Ctrl-S', mac: 'Command-S' },
            exec: function (editor) {
                document.execCommand('save');
            }
        });

        editor.commands.addCommand({
            name: 'copy',
            bindKey: { win: 'Ctrl-C', mac: 'Command-C' },
            exec: function (editor) {
                navigator.clipboard.writeText(editor.getSelectedText()).then(function () {
                    console.log('Text copied to clipboard');
                }).catch(function (err) {
                    console.error('Could not copy text: ', err);
                });
            }
        });

        // Add command to paste data
        editor.commands.addCommand({
            name: 'paste',
            bindKey: { win: 'Ctrl-V', mac: 'Command-V' },
            exec: async function (editor) {
                // With No permition 
                /*navigator.clipboard.readText().then(function(text) {
                    editor.insert(text);
                }).catch(function(err) {
                    console.error('Could not read text from clipboard: ', err);
                });*/

                // With permition request
                try {
                    // Request permission to read from the clipboard
                    const permission = await navigator.permissions.query({ name: 'clipboard-read' });
                    if (permission.state === 'granted' || permission.state === 'prompt') {
                        const text = await navigator.clipboard.readText();
                        editor.insert(text);
                    } else {
                        console.error('Clipboard permission denied');
                    }
                } catch (err) {
                    console.error('Could not read text from clipboard: ', err);
                }

            }
        });

        // Add command to paste data
        editor.commands.addCommand({
            name: 'cut',
            bindKey: { win: 'Ctrl-X', mac: 'Command-X' },
            exec: function (editor) {
                document.execCommand('paste');
            }
        });

        // Add formatter function
        editor.commands.addCommand({
            name: 'format',
            bindKey: { win: 'Ctrl-Shift-F', mac: 'Command-Shift-F' },
            exec: function (editor) {
                ace.require("ace/ext/beautify").beautify(editor.session);
            }
        });

        // Add custom key binding for select all
        editor.commands.addCommand({
            name: 'selectAll',
            bindKey: { win: 'Ctrl-A', mac: 'Command-A' },
            exec: function (editor) {
                editor.selectAll();
            }
        });


        editor.setOptions({
            fontSize: "11pt",
            showLineNumbers: true,
            enableSnippets: true,
            showGutter: true,
            vScrollBarAlwaysVisible: true,
            enableBasicAutocompletion: true,
            enableLiveAutocompletion: true,
        });
        /*
        var customSnippets = `
        snippet log
            console.log('\${1:message}');
        snippet func
            function \${1:name}(\${2:params}) {
                \${3:// body}
            }
        `;

        var snippetManager = ace.require("ace/snippets").snippetManager;
        var id = editor.session.$mode.$id;
        var m = snippetManager.files[id];
        m.scope = editor.session.$mode.$id;
        m.snippetText = customSnippets;
        m.snippet = snippetManager.parseSnippetFile(customSnippets, m.scope);
        snippetManager.register(m.snippet, m.scope);
        */


        localStorage.setItem('savedCode', `// Welcome to the LaubCoder Code Editor!
    // Start coding here...`);

        const serverFilename = '{{ filename }}'
        const verticalMenu = document.getElementById('verticalMenu');
        const toggleMenu = document.getElementById('toggleMenu');
        const logo = document.getElementById('logo')
        //const languageSelect = document.getElementById('language-select');
        let languageSelect = null;
        const themeSelect = document.getElementById('theme-select');
        const runBtn = document.getElementById('run-btn');
        const saveBtn = document.getElementById('save-btn');
        const lineNumber = document.getElementById('line-number');

        const columnNumber = document.getElementById('column-number');
        const browser = document.getElementById('browser')
        const previewCode = document.querySelector('.preview')
        var fileName = document.getElementById('filename')
        var fileTitle = document.getElementById('file-title')
        const laubCodeConsole = document.getElementById('console')
        const consoleOutput = document.getElementById('consoleOutput');
        const clearConsole = document.getElementById('clearConsole')

        consoleOutput.innerHTML = '#laubcode\\editor\\main$: \n'

        function checkLanguage(languageSelect) {
            if (languageSelect === 'py' || languageSelect === '.py') {
                return 'python'
            } else if (languageSelect === 'js' || languageSelect === '.js') {
                return 'javascript'
            } else if (languageSelect === 'tjs' || languageSelect === '.tjs') {
                return 'typescript'
            }
            return languageSelect
        }

        function formatCode(script) {

            const language = checkLanguage(languageSelect)

            if (script && language) {

                const formattedContent = prettier.format(script, {
                    parser: `${language}`,
                    plugins: prettierPlugins
                });
                return formattedContent
            }
            return script
        }

        // Load the file content when the entire page is loaded
        if (serverFilename !== null && serverFilename !== 'None' && serverFilename !== '') {
            localStorage.setItem('filename', serverFilename)
        }

        if (localStorage.getItem('filename')) {
            fileName.textContent = localStorage.getItem('filename')
            // Assign the onLoadHandler function to the window's load event
            window.addEventListener('load', (e) => {
                openFile(e, fileName.textContent)
            });

        } else {
            fileName.textContent = 'example.js'
            window.addEventListener('load', (e) => {
                openFile(e, fileName.textContent)
            });
        }

        let inputField = document.createElement('input')

        // Add a double click event listener
        fileName.addEventListener('dblclick', function () {
            let text = fileName.textContent
            //fileName.textContent = ''


            inputField.setAttribute('type', 'text')
            inputField.setAttribute('id', 'newFileName')
            inputField.style.borderRadius = '4px'
            inputField.style.backgroundColor = '#fff'
            inputField.style.color = '#000'
            inputField.style.width = '100px'
            inputField.value = String(text).trim()
            inputField.focus();

            //fileTitle.remove()
            fileTitle.append(inputField)
            this.style.display = 'none'
            fileTitle.style.display = 'block'
            //var newText = prompt('Enter new text:');
            //if (newText !== null) {
            //editableDiv.textContent = newText;
            //}
        });

        try {
            // Add event listener to the input field to handle Enter key
            inputField.addEventListener('keydown', function (event) {
                if (event.key === 'Enter') {

                    if (String(fileName.textContent).trim() !== String(inputField.value).trim()) {
                        saveNewFileName(fileName.textContent, inputField.value)
                    }
                    localStorage.setItem('filename', String(inputField.value))
                    event.preventDefault(); // Prevent default Enter key behavior
                    fileName.textContent = String(inputField.value);
                    fileTitle.style.display = 'none';
                    fileTitle.remove()
                    fileName.style.display = 'block';
                    //location.reload(true)

                }
            });
        } catch (err) { console.log(err) }

        toggleMenu.addEventListener('click', () => {
            verticalMenu.classList.toggle('collapsed');
            toggleMenu.querySelector('i').classList.toggle('fa-chevron-left');
            toggleMenu.querySelector('i').classList.toggle('fa-chevron-right');
            logo.classList.toggle('logo')
            logo.classList.toggle('logo-on-left')
        });

        clearConsole.addEventListener('click', () => {
            //consoleOutput.innerText
            consoleOutput.innerHTML = ''
        })

        //languageSelect.addEventListener('change', (e) => {
        //    editor.session.setMode(`ace/mode/${e.target.value}`);
        //});

        themeSelect.addEventListener('change', (e) => {
            editor.setTheme(`ace/theme/${e.target.value}`);
        });

        const navLink = document.querySelectorAll('#submenu .nav-link')
        navLink.forEach(link => {
            link.addEventListener('click', (e) => {
                // Remove active class from all menu items
                navLink.forEach(i => i.classList.remove('active'));
                // Add active class to the clicked menu item
                link.classList.add('active');

                //alert(link.textContent.trim())
            })
        })

        async function oututIframeScript(code) {
            var iframe = document.getElementById('output');
            iframe.contentWindow.document.open();
            iframe.contentWindow.document.write(code);
            iframe.contentWindow.document.close();
        }

        runBtn.addEventListener('click', () => {
            const code = editor.getValue();
            consoleOutput.innerHTML = ''; // Clear previous output

            if (checkLanguage(languageSelect) === 'html') {

                browser.classList.add('expand-browser')
                laubCodeConsole.classList.remove('minimize-browser')
                //previewCode.classList.add('expand-browser')
                //previewCode.innerHTML = code;
                oututIframeScript(code)
                setTimeout((e) => {
                    laubCodeConsole.style.display = 'none'
                    browser.style.display = 'block'
                }, 100)

            } else if (checkLanguage(languageSelect) === 'javascript') {

                try {
                    const result = eval(code);
                    console.log("Code execution result:", result);
                    //previewCode.innerHTML = result;
                    oututIframeScript(result)
                    setTimeout((e) => {
                        laubCodeConsole.style.display = 'none'
                        browser.style.display = 'block'
                    }, 100)
                } catch (error) {
                    console.error("Error executing code:", error);
                    //previewCode.innerHTML = "Error executing code:" + error;
                    oututIframeScript(`Error executing code: ${error}`)
                    setTimeout((e) => {
                        laubCodeConsole.style.display = 'none'
                        browser.style.display = 'block'
                    }, 100)
                }
            } else if (checkLanguage(languageSelect) === 'python') {

                if (code !== '') {

                    if (!laubCodeConsole.classList.contains('minimize-browser')) {
                        laubCodeConsole.classList.add('minimize-browser')
                        browser.classList.remove('minimize-browser')

                        setTimeout(() => {
                            browser.style.display = 'none'
                            laubCodeConsole.style.display = 'block'
                        }, 300)
                    } else {
                        browser.classList.remove('minimize-browser')
                        setTimeout(() => {
                            browser.style.display = 'none'
                            laubCodeConsole.style.display = 'block'
                        }, 300)
                    }

                    consoleOutput.innerHTML = '#laubcode\\editor\\main$: \n'
                    debug_python_script(code, consoleOutput, checkLanguage(languageSelect))
                    //runPythonScript(code)
                }

            } else {
                consoleOutput.innerHTML = '#laubcode\\editor\\main$: \n'
                consoleOutput.innerHTML += 'Unsupported language!!!'
            }

        });

        saveBtn.addEventListener('click', () => {
            const code = editor.getValue();
            localStorage.setItem('savedCode', code);
            saveScript(code)
        });

        editor.selection.on('changeCursor', () => {
            const cursorPosition = editor.getCursorPosition();
            lineNumber.textContent = cursorPosition.row + 1;
            columnNumber.textContent = cursorPosition.column + 1;
        });

        // Load saved code if exists
        const savedCode = localStorage.getItem('savedCode');
        if (savedCode) {
            editor.setValue(savedCode);
        }

        function closeBrowser(e) {
            if (!browser.classList.contains('minimize-browser')) {
                browser.classList.remove('minimize-browser')
                setTimeout((e) => {
                    browser.style.display = 'none'
                }, 400)
            }

            if (!laubCodeConsole.classList.contains('minimize-browser')) {
                laubCodeConsole.classList.add('minimize-browser')
            }
            laubCodeConsole.style.display = 'block'
        }


        let isTransparent = true

        async function saveScript(code) {
            const progressBar = document.getElementById('myBar');
            progressBar.style.width = '0%';
            progressBar.setAttribute('aria-valuenow', 0);

            const filename = document.getElementById('filename')
            const chunk = String(filename.textContent).trim().split('.')

            const endpoint = `${window.location.origin}/course/learn/laubcode/save-code/${chunk[0]}/${chunk[1]}`;

            const headers = new Headers()
            headers.append('X-CSRF-Token', csrfToken)
            headers.append("Authorization", ` Bearer ${csrfToken}`);
            const formData = new FormData()
            formData.append("code", code)
            formData.append('filename', String(filename.textContent))
            //formData.append("course_id", courseID)
            //formData.append("lesson", lesson)

            consoleOutput.innerHTML = '#laubcode\\editor\\main$: \n'
            fetch(endpoint,
                {
                    method: "POST",
                    headers: headers, // Add the CSRF token to the headers
                    body: formData,  //JSON.stringify({"comment": comment}),            
                }
            ).then(response => {
                const reader = response.body.getReader();
                const contentLength = +response.headers.get('Content-Length');
                let receivedLength = 0;

                return new ReadableStream({
                    start(controller) {
                        function push() {
                            reader.read().then(({ done, value }) => {
                                if (done) {
                                    controller.close();
                                    progressBar.style.width = '100%';
                                    progressBar.setAttribute('aria-valuenow', 100);
                                    return;
                                }
                                receivedLength += value.length;
                                const progress = (receivedLength / contentLength) * 100;
                                progressBar.style.backgroundColor = '#3cd644'
                                progressBar.style.width = progress + '%';
                                progressBar.style.color = '#fff'
                                progressBar.textContent = progress + '%';
                                progressBar.setAttribute('aria-valuenow', progress);
                                controller.enqueue(value);
                                push();
                            });
                        }
                        push();
                    }
                });
            })
                .then(stream => new Response(stream))
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then((data) => {
                    console.log(data)

                    if (data[1] === 400) {
                        consoleOutput.innerHTML += `<pre class="text-danger">${String(data[0].message)}</pre>`;
                    } else {
                        if (data[0].status) {

                        }

                    }

                }).catch((err) => {
                    console.log("Error: " + err)
                    consoleOutput.innerHTML += `<pre class="text-danger">Failed to save the project: ${String(err)}</pre>`;

                    progressBar.style.backgroundColor = 'red'
                })
        }

        async function saveNewFileName(oldFileName, newFileName) {
            const progressBar = document.getElementById('myBar');
            progressBar.style.width = '0%';
            progressBar.setAttribute('aria-valuenow', 0);

            const endpoint = `${window.location.origin}/course/learn/laubcode/rename-file-name`;

            const headers = new Headers()
            headers.append('X-CSRF-Token', csrfToken)
            headers.append("Authorization", ` Bearer ${csrfToken}`);
            const formData = new FormData()
            formData.append("old_filename", String(oldFileName))
            formData.append('new_filename', String(newFileName).trim())

            consoleOutput.innerHTML = '#laubcode\\editor\\main$: \n'

            fetch(endpoint,
                {
                    method: "POST",
                    headers: headers, // Add the CSRF token to the headers
                    body: formData,  //JSON.stringify({"comment": comment}),            
                }
            ).then(response => {
                const reader = response.body.getReader();
                const contentLength = +response.headers.get('Content-Length');
                let receivedLength = 0;

                return new ReadableStream({
                    start(controller) {
                        function push() {
                            reader.read().then(({ done, value }) => {
                                if (done) {
                                    controller.close();
                                    progressBar.style.width = '100%';
                                    progressBar.setAttribute('aria-valuenow', 100);
                                    return;
                                }
                                receivedLength += value.length;
                                const progress = (receivedLength / contentLength) * 100;
                                progressBar.style.backgroundColor = '#3cd644'
                                progressBar.style.width = progress + '%';
                                progressBar.style.color = '#fff'
                                progressBar.textContent = progress + '%';
                                progressBar.setAttribute('aria-valuenow', progress);
                                controller.enqueue(value);
                                push();
                            });
                        }
                        push();
                    }
                });
            })
                .then(stream => new Response(stream))
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then((data) => {
                    console.log(data)

                    if (data[1] === 400) {
                        consoleOutput.innerHTML += `<pre class="text-danger">${String(data[0].message)}</pre>`;
                    } else {
                        if (data[0].status) {
                            localStorage.setItem('filename', String(inputField.value))
                            update_the_page()
                        }

                    }

                    fileName.textContent = String(inputField.value);
                    fileTitle.style.display = 'none';
                    fileTitle.remove()
                    fileName.style.display = 'block';


                }).catch((err) => {
                    console.log("Error: " + err)

                    consoleOutput.innerHTML += `<pre class="text-danger">Failed to save the file: \n${String(err)}</pre>`;

                    progressBar.style.backgroundColor = 'red'
                })
        }



        //const submenu = document.getElementById('submenu')
        async function showContent(event) {

            event.preventDefault()
            const submenu = event.currentTarget.nextElementSibling;
            if (submenu.classList.contains('show')) {
                submenu.classList.remove('show')
                setTimeout(() => {
                    document.getElementById('fa-plus').style.display = 'block'
                    document.getElementById('fa-minus').style.display = 'none'
                    submenu.style.display = 'none'
                }, 100)
            } else {
                submenu.classList.add('show')

                setTimeout(() => {
                    document.getElementById('fa-plus').style.display = 'none'
                    document.getElementById('fa-minus').style.display = 'block'
                    submenu.style.display = 'block'
                }, 100)
            }
        }

        //
        async function openFile(event, filename) {
            event.preventDefault()


            // close the preview container
            if (!browser.classList.contains('minimize-browser')) {

                browser.classList.remove('minimize-browser')
                setTimeout((e) => {
                    browser.style.display = 'none'
                }, 400)
            }


            const chunk = String(filename).trim().split('.')
            const formatFile = chunk[1]

            const endpoint = `${window.location.origin}/course/learn/laubcode/save-code/${chunk[0]}/${chunk[1]}`;
            localStorage.setItem('filename', filename.trim())
            fileName.textContent = filename.trim()
            document.getElementById('current-file').textContent = filename.trim()

            const headers = new Headers()
            headers.append('X-CSRF-Token', csrfToken)
            headers.append("Authorization", ` Bearer ${csrfToken}`);

            const language = checkLanguage(formatFile)

            consoleOutput.innerHTML = "#laubcode\\editor\\main$: \n";

            fetch(endpoint,
                {
                    headers: headers, // Add the CSRF token to the headers            
                }
            )
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then((data) => {
                    console.log(data)
                    languageSelect = String(formatFile).replace('.', '')

                    if (data[1] === 400) {
                        consoleOutput.innerHTML += `<pre class="text-danger">${data[0].content}<pre>`;
                    } else {

                        editor.session.setMode(`ace/mode/${language}`);
                        editor.setValue(`${data[0].content}`)

                    }

                }).catch((err) => {
                    console.log(err)
                    consoleOutput.innerHTML += `<pre class="text-danger">Failed to open file: \n${err}<pre>`;
                })

        }



        /*
       * Code to integrate AI on autocomplete and sugestion 
       */

        async function fetchSuggestions(editor, session, pos, prefix) {
            const response = await fetch('https://api.openai.com/v1/engines/davinci-codex/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer YOUR_OPENAI_API_KEY'
                },
                body: JSON.stringify({
                    prompt: editor.getValue(),
                    max_tokens: 50,
                    n: 1,
                    stop: ["\n"]
                })
            });
            const data = await response.json();
            return data.choices.map(choice => ({
                caption: choice.text.trim(),
                value: choice.text.trim(),
                meta: 'AI Suggestion'
            }));
        }

        async function editOptions(e, option) {
            e.preventDefault()

            if (option === 'copy') {
                navigator.clipboard.writeText(editor.getSelectedText()).then(function () {
                    //alert('Copied to clipboard');
                }, function (err) {
                    console.error('Could not copy text: ', err);
                });
            } else if (option === 'paste') {
                /*navigator.clipboard.readText().then(function(text) {
                    editor.setValue(text);
                }).catch(function(err) {
                    console.error('Failed to read clipboard contents: ', err);
                });*/
            } else if (option === 'format-doc') {

                const script = editor.getValue();
                const formattedContent = formatCode(script)
                editor.setValue(`${formattedContent}`)
            }
        }



        async function getSuggestion(prompt, session, pos, prefix) {
            endpoint = `${window.location.origin}/data-science/code-suggestion`;

            // Creating header
            const headers = new Headers()
            headers.append('X-CSRF-Token', csrfToken)
            headers.append("Authorization", ` Bearer ${csrfToken}`);

            //Creating dform data
            const formData = new FormData()
            formData.append('prompt', prompt)

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({ prompt: prompt })
                });
                const data = await response.json();

                //return data.choices[0].text;
                return data.choices.map(choice => ({
                    caption: choice.text.trim(),
                    value: choice.text.trim(),
                    meta: 'AI Suggestion'
                }));
            } catch (err) {
                console.error('Error fetching suggestion:', err);
                consoleOutput.innerHTML = "#laubcode\\editor\\main$: \n";
                consoleOutput.innerHTML += `<pre class="text-danger">\n${err}<pre>`;
            }
        }


        async function chatWithAI(event) {
            event.preventDefault()
            const chat = document.querySelector('.ai-chat-section')

            if (chat.classList.contains('show')) {
                chat.classList.remove('show')
                laubCodeConsole.classList.add('minimize-browser')
                setTimeout(() => {
                    chat.style.display = 'none'
                    laubCodeConsole.style.display = 'block'
                }, 100)
            } else {
                laubCodeConsole.classList.remove('minimize-browser')
                chat.classList.add('show')
                setTimeout(() => {
                    chat.style.display = 'block'
                    laubCodeConsole.style.display = 'none'
                }, 100)
            }

        }

        ace.require("ace/ext/language_tools").addCompleter({
            getCompletions: function (editor, session, pos, prefix, callback) {
                getSuggestion(editor, session, pos, prefix).then(suggestions => {
                    callback(null, suggestions);
                });
            }
        });

        async function promptAI(prompt) {
            endpoint = `${window.location.origin}/data-science/code-suggestion`;

            const headers = new Headers()
            headers.append('X-CSRF-Token', csrfToken)
            headers.append("Authorization", ` Bearer ${csrfToken}`);

            const formData = new FormData()
            formData.append('prompt', prompt)
            consoleOutput.innerHTML = "#laubcode\\editor\\main$: \n";
            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: headers,
                    body: formData
                });
                const data = await response.json();
                return data
            } catch (err) {
                console.error('Error fetching suggestion:', err);
                consoleOutput.innerHTML += `<pre class="text-danger">Failed to prompt: \n${err}<pre>`;
                return false
            }
        }

        document.getElementById('send-prompt').addEventListener('click', (e) => {
            e.preventDefault()
            const prompt = document.getElementById('user-prompt').value
            endpoint = `${window.location.origin}/data-science/code-suggestion`;

            if (prompt) {
                //const response = promptAI(prompt) 
                //console.log(response)
            }

        })

    </script>
</body>

</html>